# HashMap

## 1.HashMap集合简介

​	HashMap基于哈希表的Map接口实现，是以key-value存储形式存在，即主要用来存放键值对。HashMap的实现是不同步的，这意味着它不是线程安全的。它的Key、Vlaue都可以为null。此外,HashMap中的映射不是有序的。

​	JDK1.8之前HashMap由**数组+链表**组成的，数组是HashMap的主题，链表则主要是为了解决哈希冲突（两个对象调用的hashCode方法计算的哈希码值一直导致计算的数组索引相同）而存在的（“拉链法”解决冲突。JDK1.8以后在解决哈希冲突时有了较大的变化，**当链表长度大于阈值（或者红黑树边界值，默认为8）并且当前数组的长度大于64时，此时此索引位置上的所有数据改为使用红黑树存储**

### 补充

​	将链表转换成红黑树前回判断，即使阈值大于8，但是数组长度小于64时，此时不会将链表变成红黑树。而是选择进行数组扩容。

​	这样做的目的时因为数组比较小，尽量避开红黑树结构，这种情况下红黑树结构，反而会降低效率，因为红黑树需要进行左旋，右旋，变色这些操作来保证平衡。同时数组长度小于

64时，搜索时间相对要快些。所以综上所述为了提高性能和减少搜索时间，底层在阈值大于8并且数组长度大于64时，链表才转换为红黑树。具体可以参考**treeifyBin**方法

​	当然虽然增加了红黑树作为底层数据结构，结构变得复杂了，但是阈值大于8并且数组长度大于64时，链表转换为红黑树时，效率也变得更高效

### 特点

1. 存取无序的
2. 键和值位置都可以是null，但是键值位置只能是一个null
3. 键位置是唯一的，底层的**数据结构控制键的**
4. JDK1.8前数据结构是：链表+数组  JDK1.8之后是：链表+数组+红黑树
5. 阈值（边界值）>8并且数组长度大于64，才将链表转换为红黑树，变为红黑树的目的是为了提高查询效率

## 2.HashMap集合底层的数据结构

### 数据结构的概念

​	数据结构是加算计存储、组织数据的方式。数据结构是指相互之间存在一种或多种特定关系的数据元素的集合。通常情况下，精心选择的数据结构可以带来更高的运行或者存储效率。数据结构往往高效的检索算法和索引技术有关

数据结构：就是存储数据的一种方式

在JDK1.8之前HashMap由**数组+链表**组成的

在JDK1.8之后HashMap由**数组+链表+红黑树**数据结构组成

